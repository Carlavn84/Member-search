{"remainingRequest":"/home/duong/Projects/inhousefilming/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/duong/Projects/inhousefilming/src/components/utils/SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/duong/Projects/inhousefilming/src/components/utils/SearchBox.vue","mtime":1632227509122},{"path":"/home/duong/Projects/inhousefilming/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duong/Projects/inhousefilming/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/duong/Projects/inhousefilming/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duong/Projects/inhousefilming/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkF1dG9jb21wbGV0ZSIsCgogIHByb3BzOiBbIml0ZW1zIl0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2g6ICcnLAogICAgICBzZWxlY3RlZEl0ZW06IG51bGwsCiAgICAgIHJlc3VsdHM6IFtdLAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CgogICAgZmlsdGVyKCkgewogICAgICAvLyBvbmx5IHN0YXJ0IHNlYXJjaGluZyBmcm9tIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsZW5ndGgsIGFzIHRoZSBkZXNpZ24gbG9va3MgdGhhdCB3YXkgKG5vdCBjbGVhciBpZiBpdCBzaG91bGQgYmUgMyBvciA0KQogICAgICAvLyBob3dldmVyLCB0aGF0IGNhbiBiZSBhIHByb2JsZW0gd2l0aCBteSBsYXN0IG5hbWUuLi4KICAgICAgaWYgKHRoaXMuc2VhcmNoLmxlbmd0aCA8IDMpIHsKICAgICAgICB0aGlzLnJlc3VsdHMgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLml0ZW1zLmZpbHRlcigoaXQpID0+CiAgICAgICAgICAgIGAkeyBpdC50ZXh0IH1gLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkgfHwKICAgICAgICAgICAgYCR7IGl0LnNlYXJjaCB9YC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICAgIC8vIGJhY2t0aWNrcyBtYWtlIHN1cmUgaXQncyBhbHdheXMgYSBzdHJpbmcKICAgICAgICApOwogICAgICB9CiAgICB9LAoKICAgIGl0ZW1DbGlja2VkKGl0ZW0pIHsKICAgICAgdGhpcy5zZWFyY2ggPSBpdGVtLnRleHQ7CiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTsKICAgIH0sCgogICAgLy8gc3BsaXQgaXRlbSB0ZXh0cyBpbnRvIGFuIGFycmF5OiBbImJlZ2lubmluZyIsICJwYXJ0IHRvIGhpZ2hsaWdodCIsICJlbmQiXQogICAgaGlnaGxpZ2h0ZWRJdGVtcyhpdGVtcykgewogICAgICByZXR1cm4gaXRlbXMubWFwKCBpdCA9PiB7CiAgICAgICAgY29uc3Qgc3RhcnRQb3NpdGlvbiA9IGAkeyBpdC50ZXh0IH1gLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih0aGlzLnNlYXJjaC50b0xvd2VyQ2FzZSgpKTsKICAgICAgICBjb25zdCBlbmRQb3NpdGlvbiA9IHN0YXJ0UG9zaXRpb24gKyB0aGlzLnNlYXJjaC5sZW5ndGg7CiAgICAgICAgY29uc3QgZXh0ZW5kZWRJdGVtID0gaXQ7CgogICAgICAgIGlmIChzdGFydFBvc2l0aW9uID09PSAtMSkKICAgICAgICAgIGV4dGVuZGVkSXRlbS5oaWdobGlnaHQgPSBbaXQudGV4dCwgIiIsICIiXTsgLy8gbm90aGluZyB0byBoaWdobGlnaHQsIHRoZSBzZWFyY2ggdmFsdWUgbXVzdCBiZSBpbiBhbiBpbnZpc2libGUgZmllbGQKICAgICAgICBlbHNlCiAgICAgICAgICBleHRlbmRlZEl0ZW0uaGlnaGxpZ2h0ID0KICAgICAgICAgICAgWwogICAgICAgICAgICAgIGl0LnRleHQuc2xpY2UoMCwgc3RhcnRQb3NpdGlvbiksCiAgICAgICAgICAgICAgaXQudGV4dC5zbGljZShzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiksCiAgICAgICAgICAgICAgaXQudGV4dC5zbGljZShlbmRQb3NpdGlvbikKICAgICAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIGV4dGVuZGVkSXRlbTsKICAgICAgfSk7CiAgICB9LAogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBzaG93RHJvcGRvd24oKSB7CiAgICAgIC8vIHNob3cgb25seSBpZiB0aGVyZSBhcmUgcmVzdWx0cyBhbmQgd2UgZGlkIG5vdCBzZWxlY3QgYW55dGhpbmcgeWV0CiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkSXRlbSA9PT0gbnVsbDsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5maWx0ZXIoKTsKCiAgICAgIC8vIGlmIHRoZSBzZWFyY2ggdGV4dCBnZXRzIGNoYW5nZWQgYWZ0ZXIgc2VsZWN0aW5nIHNvbWV0aGluZywgcmVzZXQgc2VsZWN0aW9uCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbSAhPT0gbnVsbCAmJiB0aGlzLnNlYXJjaCAhPT0gdGhpcy5zZWxlY3RlZEl0ZW0udGV4dCkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDsKICAgICAgfQogICAgfSwKCiAgICBzZWxlY3RlZEl0ZW0oKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2l0ZW0tc2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkSXRlbSA/IHRoaXMuc2VsZWN0ZWRJdGVtLmlkIDogbnVsbCk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SearchBox.vue","sourceRoot":"src/components/utils","sourcesContent":["<template>\n  <div class=\"search-box\">\n    <form @submit.prevent=\"filter\">\n      <input\n        type=\"text\"\n        class=\"search-input\"\n        autocomplete=\"off\"\n        v-model.trim=\"search\"\n      />\n    </form>\n\n    <div class=\"dropdown-list\" v-show=\"showDropdown\">\n      <ul>\n        <li v-for=\"item in highlightedItems(results)\" :key=\"item.id\"\n            @click=\"itemClicked(item)\">\n          {{ item.highlight[0] }}<span class=\"highlighted-text\" >{{ item.highlight[1] }}</span>{{ item.highlight[2] }}\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"Autocomplete\",\n\n  props: [\"items\"],\n\n  data() {\n    return {\n      search: '',\n      selectedItem: null,\n      results: [],\n    };\n  },\n\n  methods: {\n\n    filter() {\n      // only start searching from at least 3 characters length, as the design looks that way (not clear if it should be 3 or 4)\n      // however, that can be a problem with my last name...\n      if (this.search.length < 3) {\n        this.results = [];\n      } else {\n        this.results = this.items.filter((it) =>\n            `${ it.text }`.toLowerCase().includes(this.search.toLowerCase()) ||\n            `${ it.search }`.toLowerCase().includes(this.search.toLowerCase())\n            // backticks make sure it's always a string\n        );\n      }\n    },\n\n    itemClicked(item) {\n      this.search = item.text;\n      this.selectedItem = item;\n    },\n\n    // split item texts into an array: [\"beginning\", \"part to highlight\", \"end\"]\n    highlightedItems(items) {\n      return items.map( it => {\n        const startPosition = `${ it.text }`.toLowerCase().indexOf(this.search.toLowerCase());\n        const endPosition = startPosition + this.search.length;\n        const extendedItem = it;\n\n        if (startPosition === -1)\n          extendedItem.highlight = [it.text, \"\", \"\"]; // nothing to highlight, the search value must be in an invisible field\n        else\n          extendedItem.highlight =\n            [\n              it.text.slice(0, startPosition),\n              it.text.slice(startPosition, endPosition),\n              it.text.slice(endPosition)\n            ];\n\n        return extendedItem;\n      });\n    },\n  },\n\n  computed: {\n    showDropdown() {\n      // show only if there are results and we did not select anything yet\n      return this.results.length > 0 && this.selectedItem === null;\n    },\n  },\n\n  watch: {\n    search() {\n      this.filter();\n\n      // if the search text gets changed after selecting something, reset selection\n      if (this.selectedItem !== null && this.search !== this.selectedItem.text) {\n        this.selectedItem = null;\n      }\n    },\n\n    selectedItem() {\n      this.$emit('item-selected', this.selectedItem ? this.selectedItem.id : null);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .search-box {\n    position: relative; // for drop-down to take the right width\n  }\n\n  .search-input {\n    width: calc(100% - 20px);\n  }\n\n  .highlighted-text {\n    font-weight: bold;\n  }\n\n  .dropdown-list {\n    position: absolute;\n    width: calc(100% - 40px);\n    max-height: 300px;\n    margin-top: 0px;\n    overflow-y: auto;\n    background: $color-white;\n    border-radius: 8px;\n    z-index: 99999;\n    color: $color-purple;\n    padding: 20px;\n  }\n\n  .dropdown-list li {\n    margin: 10px;\n    cursor: pointer;\n  }\n\n  .dropdown-list li:hover {\n    margin-left: 15px;\n  }\n</style>\n"]}]}