{"remainingRequest":"/home/duong/Projects/Member-search/node_modules/babel-loader/lib/index.js!/home/duong/Projects/Member-search/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/duong/Projects/Member-search/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/duong/Projects/Member-search/src/components/utils/SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/duong/Projects/Member-search/src/components/utils/SearchBox.vue","mtime":1632227509122},{"path":"/home/duong/Projects/Member-search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duong/Projects/Member-search/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/duong/Projects/Member-search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/duong/Projects/Member-search/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXV0b2NvbXBsZXRlIiwKICBwcm9wczogWyJpdGVtcyJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2g6ICcnLAogICAgICBzZWxlY3RlZEl0ZW06IG51bGwsCiAgICAgIHJlc3VsdHM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBvbmx5IHN0YXJ0IHNlYXJjaGluZyBmcm9tIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsZW5ndGgsIGFzIHRoZSBkZXNpZ24gbG9va3MgdGhhdCB3YXkgKG5vdCBjbGVhciBpZiBpdCBzaG91bGQgYmUgMyBvciA0KQogICAgICAvLyBob3dldmVyLCB0aGF0IGNhbiBiZSBhIHByb2JsZW0gd2l0aCBteSBsYXN0IG5hbWUuLi4KICAgICAgaWYgKHRoaXMuc2VhcmNoLmxlbmd0aCA8IDMpIHsKICAgICAgICB0aGlzLnJlc3VsdHMgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoaXQudGV4dCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSkgfHwgIiIuY29uY2F0KGl0LnNlYXJjaCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpcy5zZWFyY2gudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgfSAvLyBiYWNrdGlja3MgbWFrZSBzdXJlIGl0J3MgYWx3YXlzIGEgc3RyaW5nCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIGl0ZW1DbGlja2VkOiBmdW5jdGlvbiBpdGVtQ2xpY2tlZChpdGVtKSB7CiAgICAgIHRoaXMuc2VhcmNoID0gaXRlbS50ZXh0OwogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07CiAgICB9LAogICAgLy8gc3BsaXQgaXRlbSB0ZXh0cyBpbnRvIGFuIGFycmF5OiBbImJlZ2lubmluZyIsICJwYXJ0IHRvIGhpZ2hsaWdodCIsICJlbmQiXQogICAgaGlnaGxpZ2h0ZWRJdGVtczogZnVuY3Rpb24gaGlnaGxpZ2h0ZWRJdGVtcyhpdGVtcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0KSB7CiAgICAgICAgdmFyIHN0YXJ0UG9zaXRpb24gPSAiIi5jb25jYXQoaXQudGV4dCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKF90aGlzMi5zZWFyY2gudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgdmFyIGVuZFBvc2l0aW9uID0gc3RhcnRQb3NpdGlvbiArIF90aGlzMi5zZWFyY2gubGVuZ3RoOwogICAgICAgIHZhciBleHRlbmRlZEl0ZW0gPSBpdDsKICAgICAgICBpZiAoc3RhcnRQb3NpdGlvbiA9PT0gLTEpIGV4dGVuZGVkSXRlbS5oaWdobGlnaHQgPSBbaXQudGV4dCwgIiIsICIiXTsgLy8gbm90aGluZyB0byBoaWdobGlnaHQsIHRoZSBzZWFyY2ggdmFsdWUgbXVzdCBiZSBpbiBhbiBpbnZpc2libGUgZmllbGQKICAgICAgICBlbHNlIGV4dGVuZGVkSXRlbS5oaWdobGlnaHQgPSBbaXQudGV4dC5zbGljZSgwLCBzdGFydFBvc2l0aW9uKSwgaXQudGV4dC5zbGljZShzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbiksIGl0LnRleHQuc2xpY2UoZW5kUG9zaXRpb24pXTsKICAgICAgICByZXR1cm4gZXh0ZW5kZWRJdGVtOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBzaG93RHJvcGRvd246IGZ1bmN0aW9uIHNob3dEcm9wZG93bigpIHsKICAgICAgLy8gc2hvdyBvbmx5IGlmIHRoZXJlIGFyZSByZXN1bHRzIGFuZCB3ZSBkaWQgbm90IHNlbGVjdCBhbnl0aGluZyB5ZXQKICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0ZWRJdGVtID09PSBudWxsOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB0aGlzLmZpbHRlcigpOyAvLyBpZiB0aGUgc2VhcmNoIHRleHQgZ2V0cyBjaGFuZ2VkIGFmdGVyIHNlbGVjdGluZyBzb21ldGhpbmcsIHJlc2V0IHNlbGVjdGlvbgoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtICE9PSBudWxsICYmIHRoaXMuc2VhcmNoICE9PSB0aGlzLnNlbGVjdGVkSXRlbS50ZXh0KSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0ZWRJdGVtOiBmdW5jdGlvbiBzZWxlY3RlZEl0ZW0oKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2l0ZW0tc2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkSXRlbSA/IHRoaXMuc2VsZWN0ZWRJdGVtLmlkIDogbnVsbCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAGA,EAAA,KAAA,EAAA,CAAA,OAAA,CAHA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAaA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AACA;AACA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,OAAA,GAAA,EAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,UAAA,EAAA;AAAA,iBACA,UAAA,EAAA,CAAA,IAAA,EAAA,WAAA,GAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,WAAA,EAAA,KACA,UAAA,EAAA,CAAA,MAAA,EAAA,WAAA,GAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,WAAA,EAAA,CAFA;AAAA,SAAA,CAGA;AAHA,SAAA;AAKA;AACA,KAdA;AAgBA,IAAA,WAhBA,uBAgBA,IAhBA,EAgBA;AACA,WAAA,MAAA,GAAA,IAAA,CAAA,IAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,KAnBA;AAqBA;AACA,IAAA,gBAtBA,4BAsBA,KAtBA,EAsBA;AAAA;;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,aAAA,GAAA,UAAA,EAAA,CAAA,IAAA,EAAA,WAAA,GAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,CAAA;AACA,YAAA,WAAA,GAAA,aAAA,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA;AACA,YAAA,YAAA,GAAA,EAAA;AAEA,YAAA,aAAA,KAAA,CAAA,CAAA,EACA,YAAA,CAAA,SAAA,GAAA,CAAA,EAAA,CAAA,IAAA,EAAA,EAAA,EAAA,EAAA,CAAA,CADA,CACA;AADA,aAGA,YAAA,CAAA,SAAA,GACA,CACA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,aAAA,CADA,EAEA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAA,aAAA,EAAA,WAAA,CAFA,EAGA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAA,WAAA,CAHA,CADA;AAOA,eAAA,YAAA;AACA,OAhBA,CAAA;AAiBA;AAxCA,GAbA;AAwDA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA;AACA,aAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA,IAAA,KAAA,YAAA,KAAA,IAAA;AACA;AAJA,GAxDA;AA+DA,EAAA,KAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,MAAA,GADA,CAGA;;AACA,UAAA,KAAA,YAAA,KAAA,IAAA,IAAA,KAAA,MAAA,KAAA,KAAA,YAAA,CAAA,IAAA,EAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA;AACA,KARA;AAUA,IAAA,YAVA,0BAUA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,YAAA,GAAA,KAAA,YAAA,CAAA,EAAA,GAAA,IAAA;AACA;AAZA;AA/DA,CAAA","sourcesContent":["<template>\n  <div class=\"search-box\">\n    <form @submit.prevent=\"filter\">\n      <input\n        type=\"text\"\n        class=\"search-input\"\n        autocomplete=\"off\"\n        v-model.trim=\"search\"\n      />\n    </form>\n\n    <div class=\"dropdown-list\" v-show=\"showDropdown\">\n      <ul>\n        <li v-for=\"item in highlightedItems(results)\" :key=\"item.id\"\n            @click=\"itemClicked(item)\">\n          {{ item.highlight[0] }}<span class=\"highlighted-text\" >{{ item.highlight[1] }}</span>{{ item.highlight[2] }}\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"Autocomplete\",\n\n  props: [\"items\"],\n\n  data() {\n    return {\n      search: '',\n      selectedItem: null,\n      results: [],\n    };\n  },\n\n  methods: {\n\n    filter() {\n      // only start searching from at least 3 characters length, as the design looks that way (not clear if it should be 3 or 4)\n      // however, that can be a problem with my last name...\n      if (this.search.length < 3) {\n        this.results = [];\n      } else {\n        this.results = this.items.filter((it) =>\n            `${ it.text }`.toLowerCase().includes(this.search.toLowerCase()) ||\n            `${ it.search }`.toLowerCase().includes(this.search.toLowerCase())\n            // backticks make sure it's always a string\n        );\n      }\n    },\n\n    itemClicked(item) {\n      this.search = item.text;\n      this.selectedItem = item;\n    },\n\n    // split item texts into an array: [\"beginning\", \"part to highlight\", \"end\"]\n    highlightedItems(items) {\n      return items.map( it => {\n        const startPosition = `${ it.text }`.toLowerCase().indexOf(this.search.toLowerCase());\n        const endPosition = startPosition + this.search.length;\n        const extendedItem = it;\n\n        if (startPosition === -1)\n          extendedItem.highlight = [it.text, \"\", \"\"]; // nothing to highlight, the search value must be in an invisible field\n        else\n          extendedItem.highlight =\n            [\n              it.text.slice(0, startPosition),\n              it.text.slice(startPosition, endPosition),\n              it.text.slice(endPosition)\n            ];\n\n        return extendedItem;\n      });\n    },\n  },\n\n  computed: {\n    showDropdown() {\n      // show only if there are results and we did not select anything yet\n      return this.results.length > 0 && this.selectedItem === null;\n    },\n  },\n\n  watch: {\n    search() {\n      this.filter();\n\n      // if the search text gets changed after selecting something, reset selection\n      if (this.selectedItem !== null && this.search !== this.selectedItem.text) {\n        this.selectedItem = null;\n      }\n    },\n\n    selectedItem() {\n      this.$emit('item-selected', this.selectedItem ? this.selectedItem.id : null);\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .search-box {\n    position: relative; // for drop-down to take the right width\n  }\n\n  .search-input {\n    width: calc(100% - 20px);\n  }\n\n  .highlighted-text {\n    font-weight: bold;\n  }\n\n  .dropdown-list {\n    position: absolute;\n    width: calc(100% - 40px);\n    max-height: 300px;\n    margin-top: 0px;\n    overflow-y: auto;\n    background: $color-white;\n    border-radius: 8px;\n    z-index: 99999;\n    color: $color-purple;\n    padding: 20px;\n  }\n\n  .dropdown-list li {\n    margin: 10px;\n    cursor: pointer;\n  }\n\n  .dropdown-list li:hover {\n    margin-left: 15px;\n  }\n</style>\n"],"sourceRoot":"src/components/utils"}]}